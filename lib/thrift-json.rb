require 'thrift' unless defined?(Thrift::BaseProtocol)

require File.join(File.dirname(__FILE__), 'thrift/json_protocol')